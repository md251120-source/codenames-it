<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Codenames ‚Äî IT Support</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:white;
  text-align:center;
}

h1{margin:20px 0}

.topbar{
  display:flex;
  justify-content:center;
  gap:25px;
  font-weight:bold;
  margin-bottom:10px;
  flex-wrap:wrap;
}

.board{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:12px;
  max-width:1000px;
  margin:20px auto;
}

.card{
  padding:20px;
  border-radius:15px;
  background:#1e293b;
  cursor:pointer;
  font-weight:bold;
  transition:0.2s;
  border:2px solid #334155;
  position:relative;
}

.card:hover{transform:scale(1.05)}

.card::before{
  content:"‚öôÔ∏è";
  position:absolute;
  top:6px;
  right:8px;
  font-size:14px;
  opacity:0.4;
}

.revealed.blue{background:#2563eb}
.revealed.red{background:#ef4444}
.revealed.neutral{background:#9ca3af}
.revealed.black{background:black}

.overlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  font-size:40px;
  font-weight:bold;
  flex-direction:column;
  z-index:1000;
}

button{
  padding:10px 18px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}

#newGameBtn{background:#22c55e;color:black}
#spyBtn{background:#111;color:white;margin-top:10px}

input{
  padding:8px;
  border-radius:6px;
  border:none;
  margin:5px;
}
</style>
</head>
<body>

<h1>üõ†Ô∏è Codenames ‚Äî IT Support</h1>

<div class="topbar">
  <div>üîµ Blue left: <span id="blueLeft"></span></div>
  <div>üî¥ Red left: <span id="redLeft"></span></div>
  <div>Turn: <span id="turnText"></span></div>
  <div>Guesses left: <span id="guessLeft"></span></div>
</div>

<div>
  <input id="clueInput" placeholder="Clue">
  <input id="numberInput" type="number" placeholder="Number">
  <button onclick="setClue()">Send Clue</button>
</div>

<div>
  <label>
    <input type="checkbox" id="timerToggle">
    Use Timer
  </label>
  <input type="number" id="timerSeconds" placeholder="Seconds">
</div>

<button id="spyBtn" onclick="toggleSpy()">Toggle Spymaster</button>
<button id="newGameBtn" onclick="setup()">New Game</button>

<div class="board" id="board"></div>

<div class="overlay" id="overlay"></div>

<script>

const PASSWORD="LY10";

const params=new URLSearchParams(location.search);
if(params.get("password")!==PASSWORD){
  document.body.innerHTML="<h2>üö´ Access Denied</h2>";
  throw "";
}

const words=[
"VPN","Firewall","Router","Switch","Server",
"Backup","Restore","Password","MFA","DNS",
"DHCP","Ticket","Outage","Printer","Email",
"Patch","Antivirus","Cloud","Database","IP",
"WiFi","Hardware","Software","Account","Support"
];

let cards=[];
let turn="blue";
let blueLeft=9;
let redLeft=8;
let guessLeft=0;
let spymaster=false;
let timer=null;

function shuffle(a){
 for(let i=a.length-1;i>0;i--){
  let j=Math.floor(Math.random()*(i+1));
  [a[i],a[j]]=[a[j],a[i]];
 }
 return a;
}

function setup(){
 let colors=[
  ...Array(9).fill("blue"),
  ...Array(8).fill("red"),
  ...Array(7).fill("neutral"),
  "black"
 ];
 shuffle(colors);
 shuffle(words);

 cards=[];
 blueLeft=9;
 redLeft=8;
 guessLeft=0;
 turn="blue";

 for(let i=0;i<25;i++){
  cards.push({word:words[i],color:colors[i],revealed:false});
 }
 render();
}

function render(){
 const board=document.getElementById("board");
 board.innerHTML="";
 cards.forEach((card,i)=>{
  const div=document.createElement("div");
  div.className="card";
  if(card.revealed){
   div.classList.add("revealed",card.color);
  }
  if(spymaster && !card.revealed){
   div.style.borderColor=card.color;
  }
  div.innerText=card.word;
  div.onclick=()=>clickCard(i);
  board.appendChild(div);
 });

 document.getElementById("blueLeft").innerText=blueLeft;
 document.getElementById("redLeft").innerText=redLeft;
 document.getElementById("turnText").innerText=turn.toUpperCase();
 document.getElementById("guessLeft").innerText=guessLeft;
}

function clickCard(i){
 let card=cards[i];
 if(card.revealed) return;

 card.revealed=true;

 if(card.color==="black"){
  showLose(turn);
  return;
 }

 if(card.color===turn){
  guessLeft--;
  if(turn==="blue") blueLeft--;
  else redLeft--;

  if(blueLeft===0) return showWin("BLUE TEAM");
  if(redLeft===0) return showWin("RED TEAM");

  if(guessLeft<=0){
    switchTurn();
  }

 }else{
  switchTurn();
 }

 render();
}

function switchTurn(){
 turn=turn==="blue"?"red":"blue";
 guessLeft=0;
}

function setClue(){
 guessLeft=parseInt(document.getElementById("numberInput").value);
 render();

 if(document.getElementById("timerToggle").checked){
   let seconds=parseInt(document.getElementById("timerSeconds").value);
   clearTimeout(timer);
   timer=setTimeout(()=>{
     switchTurn();
     render();
   },seconds*1000);
 }
}

function showWin(text){
 const overlay=document.getElementById("overlay");
 overlay.style.background="green";
 overlay.innerHTML=text+" WINS üéâ<br><button onclick='setup()'>New Game</button>";
 overlay.style.display="flex";
 playSound();
}

function showLose(team){
 const overlay=document.getElementById("overlay");
 overlay.style.background="black";
 overlay.innerHTML=team.toUpperCase()+" LOST üíÄ<br><button onclick='setup()'>New Game</button>";
 overlay.style.display="flex";
}

function toggleSpy(){
 spymaster=!spymaster;
 render();
}

function playSound(){
 const audio=new AudioContext();
 const osc=audio.createOscillator();
 osc.connect(audio.destination);
 osc.start();
 osc.stop(audio.currentTime+0.3);
}

setup();

</script>
</body>
</html>
